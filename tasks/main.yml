---
- name: download solr...
  get_url: >
    url={{solr_url}}
    dest=/tmp/{{solr_archive}}
    owner=root
    group=root
    mode=0644

- name: unarchive solr...
  unarchive: >
    copy=no
    src=/tmp/{{solr_archive}}
    dest=/opt
    creates=/opt/{{solr_name}}

- name: link solr...
  file: >
    src=/opt/{{solr_name}}
    dest=/opt/solr
    state=link
    owner=root
    group=root

- name: include solr in the default path...
  copy: >
    src=etc/profile.d/solr.sh
    dest=/etc/profile.d/solr.sh
    group=root
    owner=root
    mode=644